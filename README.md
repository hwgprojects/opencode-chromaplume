# ChromaPlume

Sync your [VS Code Peacock](https://marketplace.visualstudio.com/items?itemName=johnpapa.vscode-peacock) colors to [OpenCode](https://opencode.ai) themes.

When you open a project in OpenCode that has Peacock colors configured, ChromaPlume reads the color and generates a matching OpenCode theme - using OpenCode's default theme as the base and respecting dark/light mode.

## How It Works

```
Your Project/
├── .vscode/
│   └── settings.json          # Peacock stores color here
├── .opencode/
│   └── themes/
│       └── peacock.json       # Generated by ChromaPlume
└── opencode.json              # Auto-updated with "theme": "peacock"
```

1. **Reads** `peacock.color` or `peacock.remoteColor` from `.vscode/settings.json`
2. **Generates** a minimal `peacock.json` theme that only overrides accent colors
3. **Uses OpenCode's default theme** as the base (respects dark/light mode automatically)
4. **Updates** the project's `opencode.json` to use the `peacock` theme

## Installation

### Option 1: From npm (Recommended)

Add to your `~/.config/opencode/opencode.json`:

```json
{
  "plugin": ["opencode-chromaplume"]
}
```

### Option 2: Local Installation

Copy the plugin to your global plugin directory:

```bash
mkdir -p ~/.config/opencode/plugin
cp src/index.ts ~/.config/opencode/plugin/chromaplume.ts
```

## Setup

### 1. Configure Peacock in VS Code

If you haven't already, install [Peacock](https://marketplace.visualstudio.com/items?itemName=johnpapa.vscode-peacock) in VS Code and set a color for your workspace:

1. Open Command Palette (`Cmd+Shift+P` / `Ctrl+Shift+P`)
2. Run `Peacock: Change to a Favorite Color`
3. Select a color

This creates a `.vscode/settings.json` with your Peacock color.

### 2. Open Your Project in OpenCode

```bash
cd your-project
opencode
```

ChromaPlume will automatically:
- Detect the Peacock color
- Generate `.opencode/themes/peacock.json`
- Set `"theme": "peacock"` in your project's `opencode.json`

## What Gets Themed

ChromaPlume overrides these theme properties with your Peacock color:

| Property | Dark Mode | Light Mode |
|----------|-----------|------------|
| `primary` | Peacock color | Peacock color |
| `accent` | Peacock +15% lighter | Peacock -15% darker |
| `secondary` | Peacock -15% darker | Peacock +15% lighter |
| `borderActive` | Peacock color | Peacock color |
| `markdownHeading` | Peacock color | Peacock color |
| `markdownLink` | Peacock color | Peacock color |
| `markdownLinkText` | Peacock lighter | Peacock darker |
| `markdownListItem` | Peacock color | Peacock color |

All other colors (text, background, syntax highlighting, etc.) come from OpenCode's default theme.

## Example

If your Peacock color is `#215732` (green):

**Input:** `.vscode/settings.json`
```json
{
  "peacock.remoteColor": "#215732"
}
```

**Output:** `.opencode/themes/peacock.json`
```json
{
  "$schema": "https://opencode.ai/theme.json",
  "defs": {
    "peacock": "#215732",
    "peacockLight": "#368e52",
    "peacockDark": "#0c2012"
  },
  "theme": {
    "primary": { "dark": "peacock", "light": "peacock" },
    "accent": { "dark": "peacockLight", "light": "peacockDark" },
    "secondary": { "dark": "peacockDark", "light": "peacockLight" },
    "borderActive": { "dark": "peacock", "light": "peacock" },
    "markdownHeading": { "dark": "peacock", "light": "peacock" },
    "markdownLink": { "dark": "peacock", "light": "peacock" },
    "markdownLinkText": { "dark": "peacockLight", "light": "peacockDark" },
    "markdownListItem": { "dark": "peacock", "light": "peacock" }
  }
}
```

## License

MIT
